using NUnit.Framework;

using TechTalk.SpecFlow.Compatibility;

namespace TechTalk.SpecFlow.RuntimeTests
{
    [TestFixture]
    public class TestRunnerTest
    {
        [Test]
        public void SetsCurrentRunnerOnFeatureStart()
        {
            var testRunner = ObjectContainer.EnsureSyncTestRunner(GetType().Assembly);

            var featureInfo = new FeatureInfo(CultureInfoHelper.GetCultureInfo("en-us"), "Title", "Description");
            testRunner.OnFeatureStart(featureInfo);

            Assert.IsNotNull(ObjectContainer.CurrentTestRunner);
            Assert.AreSame(testRunner, ObjectContainer.CurrentTestRunner);
        }

        [Test]
        public void ClearsCurrentRunnerOnFeaturedEnd()
        {
            var testRunner = ObjectContainer.EnsureSyncTestRunner(GetType().Assembly);

            var featureInfo = new FeatureInfo(CultureInfoHelper.GetCultureInfo("en-us"), "Title", "Description");
            testRunner.OnFeatureStart(featureInfo);
            testRunner.OnFeatureEnd();

            Assert.IsNull(ObjectContainer.CurrentTestRunner);
        }
    }
}