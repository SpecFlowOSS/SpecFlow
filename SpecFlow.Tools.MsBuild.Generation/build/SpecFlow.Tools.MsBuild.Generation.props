<Project TreatAsLocalProperty="TaskFolder;TaskAssembly">

  <PropertyGroup>
    <SpecFlowTasksAssembly Condition="'$(SpecFlowTasksAssembly)' == '' AND '$(MSBuildRuntimeType)' == 'Core'">$(MSBuildThisFileDirectory)..\tasks\netcoreapp2.0\SpecFlow.Tools.MsBuild.Generation.dll</SpecFlowTasksAssembly>
    <SpecFlowTasksAssembly Condition="'$(SpecFlowTasksAssembly)' == ''">$(MSBuildThisFileDirectory)..\tasks\net471\SpecFlow.Tools.MsBuild.Generation.dll</SpecFlowTasksAssembly>
  </PropertyGroup>

  <PropertyGroup>
    <GenerateSpecFlowCodeFilesDependsOn>
      EnsureLegacySpecFlowCodeGenerationIsDisabled;
      DetermineSpecFlowGeneratedCodeLocation;
      $(GenerateSpecFlowCodeFilesDependsOn)
    </GenerateSpecFlowCodeFilesDependsOn>
    <CleanSpecFlowGeneratedCodeFilesDependsOn>
      DetermineSpecFlowGeneratedCodeLocation;
      $(CleanSpecFlowGeneratedCodeFilesDependsOn)
    </CleanSpecFlowGeneratedCodeFilesDependsOn>
  </PropertyGroup>

  <ItemGroup>
    <SpecFlowFeature Include="**/*.feature" />
    <SpecFlowFeature Include="**/*.feature.xlsx" />
    
    <!-- Support for Visual Studio Incremental Build
        https://github.com/techtalk/SpecFlow/issues/1319
     -->
    <UpToDateCheckInput Include="@(SpecFlowFeature)" />
  </ItemGroup>

  <Import Project="SpecFlow.Tools.MsBuild.Generation.tasks"/>

</Project>
